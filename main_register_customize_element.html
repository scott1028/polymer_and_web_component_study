<html>
<body>
    <script>

        // 回调名称                                                 调用时间点
        // createdCallback                                         创建元素实例
        // attachedCallback                                        向文档插入实例
        // detachedCallback                                        从文档中移除实例
        // attributeChangedCallback(attrName, oldVal, newVal)      添加，移除，或修改一个属性

        // first code style, general element prototype
        var mybt_proto = Object.create(HTMLElement.prototype, {
            createdCallback: {
                // callback fn add to value node
                value: function(){
                    console.log('Init');
                    console.log(this.textContent);
                    console.log(this.innerHTML);
                    console.log(this.attributes.url);
                    console.log(this.attributes);
                    console.log('\n');
                    // debugger;
                }
            }
        });

        document.registerElement('scott-panel', {
            prototype: mybt_proto
        });

        // second code style, button element prototype.
        // prototype is also a object.
        /*
            var k = function(){};
            a.prototype = new Date();       // like this way!
        */
        var mybt_prototype_2 = Object.create(HTMLButtonElement.prototype);
        mybt_prototype_2.createdCallback = function(){
            console.log('mybt_proto2 init\n');
        };

        document.registerElement('scott-panel2', {
            prototype: mybt_prototype_2
        });

        var elm2 = document.createElement('scott-panel2');
        document.body.appendChild(elm2);

        // test if is instance of HTMLButtonElement;
        console.log(
            'elm2 instanceof HTMLButtonElement :' + (elm2 instanceof HTMLButtonElement).toString());

    </script>

    <scott-panel url="http://www.hinet.net">Test1</scott-panel>
    <hr />

    <script>
        // test Object.create for Inherits Prototype
        var c = function(){
        };
        c.prototype.echo = function(){
            console.log('test echo');
        };
        var c_sub = function(){};
        c_sub.prototype = Object.create(c.prototype);

        // like new statement;
        console.log( Object.create(c.prototype) instanceof c );
        console.log( new c instanceof c );

        // new class is very similar to Object.create(class.prototype);
        // you can new Class or Object.create(Class.prototype),
        // but you can not new HTMLElement() instead new HTMLElement, this statement will throw error;
    </script>

    <script>
        // Object.create Test & Try
        // Object.getPrototypeOf 函式會取得原始物件的原型
        var newObj = Object.create(null, {
                size: {
                    value: "large",
                    enumerable: true
                },
                shape: {
                    value: "round",
                    enumerable: true
                },
                echo: {
                    value: function(){
                        console.log('newObj echo!');
                    }
                }
            });

        console.log(newObj.size);
        console.log(newObj.shape);
        console.log(Object.getPrototypeOf(newObj));
        newObj.echo();

        // Output:
        // large
        // round
        // null
    </script>
</body>
</html>
